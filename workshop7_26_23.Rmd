---
title: "Handling missing data in AFCARS"
output: html_notebook
editor_options: 
  chunk_output_type: inline
---

Load in the needed packages

```{r}
library(tidyverse)
library(mice)
```

First let's load in the de-identified AFCARS data and state population data

```{r}
dat<-read_csv("./data/afcars_demo.csv")

### read pop data and harmonize variable names to afcars names
pop<-read_csv("./data/pop_demo.csv") %>% 
  rename(St = state, 
         FY = year)
```

Let's explore the AgeAtStart measure

```{r}
table(dat$AgeAtStart)

### explicitly recode missings
dat<-dat %>% 
  mutate(AgeAtStart = 
           case_when(
             AgeAtStart >= 99 ~ NA,
             T ~ AgeAtStart
           ))
```

PIVOTING TO THE MICE DEMO WITH BUILT IN DATA

```{r}
head(nhanes)

summary(nhanes)

imps<-mice(nhanes)


```

```{r}
m0<-lm(chl ~ age, data = nhanes)
m1<-lm(chl ~ age + bmi + hyp, data = nhanes)
```

